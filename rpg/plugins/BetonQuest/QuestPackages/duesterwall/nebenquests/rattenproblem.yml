# Nebenquest: Rattenproblem
# Side Quest: Rat Problem
# Quest-Geber: Händler Berthold

# ============================================================================
# Rattenproblem - Bertholds Keller ist voller Ratten
# ============================================================================

conversations:
  berthold_ratten_quest:
    quester: "Händler Berthold"
    first: "start"
    
    NPC_options:
      start:
        text: "&e*Panisch* RATTEN! Mein Keller ist voller RATTEN! Sie fressen alles auf! Meine Seide! Mein Getreide! Meine PROFITE! *dramatisch* Ich bin RUINIERT!"
        pointer: "spieler_antwort"
        conditions: "!ratten_quest_aktiv,!ratten_quest_complete"
      
      details:
        text: "&eDie Biester kommen aus einem Nest irgendwo im Keller! Töte 10 von diesen Viechern und zerstöre das Nest! Ich zahle 200 Gold! Und... *seufzt* ...10% Rabatt für eine Woche."
        pointer: "quest_optionen"
      
      erfolg:
        text: "&e*Strahlt* ENDLICH! Ruhe! Keine nagenden Geräusche mehr! Du bist ein wahrer Held! *zählt widerwillig Gold* Hier... wie versprochen."
        pointer: "ende"
        events: "ratten_belohnung_final"
        conditions: "ratten_quest_complete"
      
      ende:
        text: "&7Auf Wiedersehen."
        pointer: ""
    
    
    player_options:
      spieler_antwort:
        text: "&7[Zurück zum Hauptmenü]"
        pointer: "start"
      
      quest_optionen:
        text: "&7[Zurück]"
        pointer: "start"
      
      fragen:
        text: "&7Wie schlimm ist es?"
        pointer: "details"
      
      annehmen:
        text: "&aIch kümmere mich um die Ratten!"
        pointer: "ende"
        events: "start_ratten_quest"
      
      ablehnen:
        text: "&7Das ist nicht mein Problem..."
        pointer: "ende"

events:
  start_ratten_quest: "run ^tag ratten_quest_aktiv ^journal add ratten_quest_start ^objective add toete_ratten 10"
  ratten_getoetet: "run ^tag ratten_getoetet ^journal add ratten_getoetet_journal ^objective add finde_nest"
  nest_zerstoert: "run ^tag nest_zerstoert ^journal add nest_zerstoert_journal"
  ratten_quest_abschluss: "run ^tag ratten_quest_complete ^tag del ratten_quest_aktiv"
  ratten_belohnung_final: "run ^point playerpoints 200 ^experience 100 ^tag berthold_rabatt ^_core.sound_quest_complete ^journal add ratten_quest_done"

objectives:
  toete_ratten: "mobkill SILVERFISH 10 events:ratten_getoetet notify:1:&7%left% Ratten verbleiben"
  finde_nest: "location -20;60;-20;10 events:nest_zerstoert notify:1:&7Finde und zerstöre das Rattennest"
  zerstoere_nest: "block COBWEB 1 events:ratten_quest_abschluss notify:1:&7Zerstöre das Rattennest"

conditions:
  ratten_quest_aktiv: "tag ratten_quest_aktiv"
  ratten_quest_complete: "tag ratten_quest_complete"
  ratten_getoetet: "tag ratten_getoetet"
  nest_zerstoert: "tag nest_zerstoert"

journal:
  ratten_quest_start: "&eNebenquest: Rattenproblem|&7Händler Berthold hat ein|&7Rattenproblem im Keller.|&7Ich soll 10 Ratten töten|&7und ihr Nest zerstören."
  ratten_getoetet_journal: "&eRatten eliminiert!|&7Die Ratten sind tot.|&7Jetzt muss ich ihr Nest|&7finden und zerstören."
  nest_zerstoert_journal: "&eNest gefunden!|&7Das Rattennest wurde|&7lokalisiert. Jetzt|&7zerstören!"
  ratten_quest_done: "&e&lQuest Abgeschlossen!|&7Bertholds Keller ist|&7rattenfrei!|&7Belohnung: 200 Gold und|&710% Rabatt für 1 Woche!"

# Twist: Rattennest Location - sollte in Bertholds Keller platziert werden
# Koordinaten müssen vom Server-Admin angepasst werden
