# ===================================================
# Schattenfürst Nyx Skills - Slayer Tier V Boss
# Phantom-Slayer Boss mit 4 Kampfphasen
# ===================================================

# ==========================================
# Phase 1 Skills (100%-70% HP)
# ==========================================

# Schattenpfeile - Shadow projectiles
SchattenpfeileNyx:
  Skills:
  - 'message{m="&8&lNyx: &7Die Schatten werden dich finden!"} @target'
  - effect:sound{s=entity.phantom.swoop;v=1.5;p=0.8} @self
  - projectile{onTick=Schattenpfeil_Tick;onHit=Schattenpfeil_Hit;v=3;i=1;ht=true;hR=0.8;vR=0.8} @target

Schattenpfeil_Tick:
  Skills:
  - effect:particles{p=smoke_large;a=5;hS=0.2;vS=0.2} @origin
  - effect:particles{p=portal;a=2;hS=0.1;vS=0.1} @origin

Schattenpfeil_Hit:
  Skills:
  - damage{a=22;ia=0.5} @target
  - potion{t=BLINDNESS;d=80;l=1} @target
  - potion{t=WEAKNESS;d=80;l=1} @target
  - effect:particles{p=smoke_large;a=30;hS=1;vS=1} @target
  - effect:sound{s=entity.phantom.bite;v=1;p=1} @target

# Teleport - Quick repositioning
TeleportNyx:
  Skills:
  - effect:particles{p=smoke_large;a=100;hS=2;vS=3} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self
  - teleport{l=true;r=15;maxy=8} @self
  - delay 10
  - effect:particles{p=smoke_large;a=100;hS=2;vS=3} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self

# ==========================================
# Phase 2 Skills (70%-45% HP)
# ==========================================

# Schattenklone - Summons shadow clones
SchattenkloneNyx:
  Skills:
  - 'message{m="&8&lNyx: &7Könnt ihr mich noch von meinen Schatten unterscheiden?"} @PlayersInRadius{r=30}'
  - effect:particles{p=smoke_large;a=200;hS=4;vS=3} @self
  - effect:sound{s=entity.phantom.ambient;v=1.5;p=0.8} @self
  - delay 20
  - summon{t=Schatten_Klon;a=4;r=6} @self
  - effect:particles{p=portal;a=300;hS=6;vS=3} @self

# Dunkelheitsfeld - Darkness zone
DunkelheitsfeldNyx:
  Skills:
  - 'message{m="&8&l>>> NYX ERSCHAFFT EIN DUNKELHEITSFELD! <<<"} @PlayersInRadius{r=30}'
  - effect:particles{p=smoke_large;a=500;hS=15;vS=5} @self
  - effect:sound{s=entity.wither.ambient;v=1.5;p=0.5} @self
  - delay 30
  - potion{t=BLINDNESS;d=200;l=2} @PlayersInRadius{r=18}
  - potion{t=SLOW;d=200;l=2} @PlayersInRadius{r=18}
  - damage{a=15} @PlayersInRadius{r=18}
  - effect:particles{p=squid_ink;a=1000;hS=18;vS=6} @self
  - 'message{m="&8Die Dunkelheit umhüllt euch!"} @PlayersInRadius{r=30}'

# ==========================================
# Phase 3 Skills (45%-20% HP)
# ==========================================

# Teleport Spam - Rapid teleportation
TeleportSpamNyx:
  Skills:
  - effect:particles{p=smoke_large;a=80;hS=2;vS=2} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=1} @self
  - teleport{l=true;r=12;maxy=6} @self
  - delay 5
  - effect:particles{p=smoke_large;a=80;hS=2;vS=2} @self

# Lebensraub - Life steal attack
LebensraubNyx:
  Skills:
  - 'message{m="&8&lNyx: &7Deine Lebenskraft gehört MIR!"} @target'
  - effect:particles{p=damage_indicator;a=100;hS=3;vS=3} @target
  - effect:sound{s=entity.phantom.bite;v=1.5;p=0.5} @self
  - delay 20
  - damage{a=28} @target
  - heal{a=300} @self
  - effect:particles{p=heart;a=30;hS=2;vS=2} @self
  - effect:sound{s=entity.player.levelup;v=1;p=1.5} @self

# ==========================================
# Phase 4 Skills (20%-0% HP)
# ==========================================

# Ewige Nacht - Ultimate darkness attack
EwigeNachtNyx:
  Skills:
  - 'message{m="&8&l>>> NYX WIRKT EWIGE NACHT! <<<"} @PlayersInRadius{r=50}'
  - 'message{m="&c&lDIE DUNKELHEIT VERSCHLINGT ALLES!"} @PlayersInRadius{r=50}'
  - effect:particles{p=smoke_large;a=1000;hS=20;vS=10} @self
  - effect:sound{s=entity.wither.spawn;v=2;p=0.5} @self
  - delay 40
  - potion{t=BLINDNESS;d=300;l=5} @PlayersInRadius{r=50}
  - potion{t=SLOW;d=200;l=3} @PlayersInRadius{r=50}
  - potion{t=CONFUSION;d=200;l=2} @PlayersInRadius{r=50}
  - damage{a=40} @PlayersInRadius{r=25}
  - effect:particles{p=squid_ink;a=2000;hS=30;vS=15} @self
  - 'message{m="&8&lNyx: &7Die ewige Nacht ist gekommen!"} @PlayersInRadius{r=50}'

# Phase 4 Enrage Buff
EnrageBuffNyx:
  Skills:
  - 'message{m="&8&lNyx: &7IHR WERDET IN DER DUNKELHEIT VERSINKEN!"} @PlayersInRadius{r=30}'
  - potion{t=SPEED;d=999999;l=3} @self
  - potion{t=INCREASE_DAMAGE;d=999999;l=3} @self
  - potion{t=INVISIBILITY;d=999999;l=1} @self
  - effect:particles{p=angry_villager;a=50;hS=2;vS=2} @self
  - effect:sound{s=entity.ender_dragon.growl;v=1.5;p=0.5} @self

# ==========================================
# Boss Dialog Skills
# ==========================================

# Start Dialog
NyxStartDialog:
  Skills:
  - 'message{m="&8&lNyx: &7Die Schatten rufen nach euch... und ihr werdet ihnen folgen..."} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.phantom.ambient;v=2;p=0.5} @self
  - delay 40
  - skill{s=BossSpawnAnnounce} @self

# Phase 2 Dialog
NyxPhase2Dialog:
  Skills:
  - 'message{m="&8&lNyx: &7Könnt ihr mich noch von meinen Schatten unterscheiden?"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.phantom.hurt;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self

# Phase 3 Dialog
NyxPhase3Dialog:
  Skills:
  - 'message{m="&8&lNyx: &7Genug gespielt... die Dunkelheit wird euch verschlingen!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.phantom.swoop;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self

# Phase 4 Dialog
NyxPhase4Dialog:
  Skills:
  - 'message{m="&8&lNyx: &7IHR WERDET IN DER DUNKELHEIT VERSINKEN!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.wither.angry;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self
  - delay 20
  - skill{s=EnrageBuffNyx} @self

# Death Dialog
NyxDeathDialog:
  Skills:
  - 'message{m="&8&lNyx: &7Nein... die Schatten... sie verlassen mich..."} @PlayersInRadius{r=50}'
  - effect:sound{s=entity.phantom.death;v=2;p=0.5} @self
  - delay 20
  - skill{s=BossDeathEffects} @self
