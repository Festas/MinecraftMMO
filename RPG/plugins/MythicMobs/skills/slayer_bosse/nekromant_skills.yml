# ===================================================
# Nekromant Malachar Skills - Slayer Tier V Boss
# Untoten-Slayer Boss mit 3 Kampfphasen
# ===================================================

# ==========================================
# Phase 1 Skills (100%-70% HP)
# ==========================================

# Todesgriff - Zieht Spieler zum Boss
TodesgriffMalachar:
  Skills:
  - 'message{m="&5&lMalachar: &7Komm zu mir, Sterblicher!"} @target'
  - effect:particles{p=soul;a=50;hS=1;vS=1} @target
  - effect:sound{s=entity.wither.ambient;v=1;p=0.8} @self
  - delay 10
  - pull{v=2;y=0.5} @target
  - damage{a=10} @target
  - effect:particles{p=soul_fire_flame;a=30;hS=1;vS=1} @target

# Skelett-Diener Beschwörung Phase 1
BeschwoereDienerP1:
  Skills:
  - 'message{m="&5&lMalachar: &7Erhebt euch, meine Diener!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=50;hS=3;vS=2} @self
  - effect:sound{s=entity.zombie.infect;v=1;p=0.5} @self
  - delay 20
  - summon{t=Skelett_Diener;a=3;r=5} @self
  - effect:particles{p=LARGE_SMOKE;a=100;hS=5;vS=2} @self

# ==========================================
# Phase 2 Skills (70%-40% HP)
# ==========================================

# Seelenraub - AoE Schaden + Heilung
SeelenraubMalachar:
  Skills:
  - 'message{m="&5&lMalachar: &7Eure Lebenskraft gehört MIR!"} @PlayersInRadius{r=20}'
  - effect:particles{p=damage_indicator;a=100;hS=5;vS=2} @self
  - effect:sound{s=entity.wither.hurt;v=1.5;p=0.5} @self
  - delay 20
  - damage{a=15} @PlayersInRadius{r=8}
  - heal{a=200} @self
  - effect:particles{p=heart;a=30;hS=2;vS=2} @self
  - effect:sound{s=entity.player.levelup;v=1;p=1.5} @self

# Knochenkäfig - Fängt Spieler ein
KnochenkäfigMalachar:
  Skills:
  - 'message{m="&5&lMalachar: &7Du kannst nicht entkommen!"} @target'
  - effect:particles{p=block_crack;m=bone_block;a=50;hS=2;vS=2} @target
  - effect:sound{s=block.bone_block.place;v=2;p=0.5} @self
  - potion{t=SLOW;d=100;l=10} @target
  - potion{t=BLINDNESS;d=100;l=1} @target
  - potion{t=WEAKNESS;d=100;l=2} @target
  - delay 10
  - effect:particles{p=LARGE_SMOKE;a=100;hS=1;vS=2} @target

# Skelett-Diener Beschwörung Phase 2
BeschwoereDienerP2:
  Skills:
  - 'message{m="&5&lMalachar: &7Ihr seid hartnäckig... aber meine Armee ist UNENDLICH!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=80;hS=4;vS=3} @self
  - effect:sound{s=entity.zombie.infect;v=1.5;p=0.5} @self
  - delay 20
  - summon{t=Skelett_Diener;a=5;r=6} @self
  - effect:particles{p=LARGE_SMOKE;a=150;hS=6;vS=3} @self

# ==========================================
# Phase 3 Skills (40%-0% HP)
# ==========================================

# Apokalypse der Toten - Ultimate Skill
ApokalypseMalachar:
  Skills:
  - 'message{m="&5&l>>> Malachar beginnt Apokalypse der Toten zu wirken! <<<"} @PlayersInRadius{r=30}'
  - 'message{m="&c&lUNTERBRECHT IHN SCHNELL!"} @PlayersInRadius{r=30}'
  - effect:particles{p=soul_fire_flame;a=200;hS=3;vS=3} @self
  - effect:sound{s=entity.wither.spawn;v=2;p=0.5} @self
  - potion{t=SLOW;d=100;l=5} @self
  - delay 100
  - damage{a=50} @PlayersInRadius{r=15}
  - summon{t=Skelett_Diener;a=10;r=8} @self
  - effect:particles{p=explosion_huge;a=5;hS=10;vS=5} @self
  - effect:sound{s=entity.generic.explode;v=2;p=0.5} @self
  - 'message{m="&5&lMalachar: &7STERBT ALLE!"} @PlayersInRadius{r=30}'

# Skelett-Champion Beschwörung Phase 3
BeschwoereChampions:
  Skills:
  - 'message{m="&5&lMalachar: &7GENUG! Ich werde euch ALLE vernichten!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=150;hS=5;vS=4} @self
  - effect:sound{s=entity.wither.spawn;v=1.5;p=0.8} @self
  - delay 30
  - summon{t=Skelett_Champion;a=2;r=7} @self
  - effect:particles{p=explosion_large;a=20;hS=5;vS=3} @self
  - effect:sound{s=entity.lightning_bolt.thunder;v=1;p=0.8} @self

# Phase 3 Rage Buff
RageBuffMalachar:
  Skills:
  - 'message{m="&5&lMalachar: &7Meine Macht wächst!"} @PlayersInRadius{r=30}'
  - potion{t=SPEED;d=999999;l=2} @self
  - potion{t=INCREASE_DAMAGE;d=999999;l=2} @self
  - effect:particles{p=angry_villager;a=50;hS=2;vS=2} @self
  - effect:sound{s=entity.ender_dragon.growl;v=1.5;p=0.5} @self

# ==========================================
# Boss Dialog Skills
# ==========================================

# Start Dialog
MalacharStartDialog:
  Skills:
  - 'message{m="&5&lMalachar: &7Eure Seelen werden meiner Armee dienen... für alle Ewigkeit!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.wither.ambient;v=2;p=0.5} @self
  - delay 40
  - skill{s=BossSpawnAnnounce} @self

# Phase 2 Dialog
MalacharPhase2Dialog:
  Skills:
  - 'message{m="&5&lMalachar: &7Ihr seid hartnäckig... aber meine Armee ist UNENDLICH!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.wither.hurt;v=1.5;p=0.5} @self
  - skill{s=PhaseTransition} @self

# Phase 3 Dialog
MalacharPhase3Dialog:
  Skills:
  - 'message{m="&5&lMalachar: &7GENUG! Ich werde euch ALLE vernichten!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.wither.angry;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self
  - delay 20
  - skill{s=RageBuffMalachar} @self

# Death Dialog
MalacharDeathDialog:
  Skills:
  - 'message{m="&5&lMalachar: &7Nein... unmöglich... meine Armee..."} @PlayersInRadius{r=50}'
  - effect:sound{s=entity.wither.death;v=2;p=0.5} @self
  - delay 20
  - skill{s=BossDeathEffects} @self
