######## created by samus2002 #########

# Summoners_Command #

Summoners_Command:
  Conditions:
  #no casting aura
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Summoners_Command_CAST}

Summoners_Command_CAST:
  Conditions:
  - variableeq{var=caster.summonstance;value="focus"} castinstead Summoners_Command_CAST_FREE
  - variableeq{var=caster.summonstance;value="free"} castinstead Summoners_Command_CAST_IDLE
  Skills:
  - skill{s=Summoners_Command_CAST_FOCUS}

Summoners_Command_CAST_FOCUS:
  Skills:
  - auraremove{aura=Summoners_Command_STACK} @self
  - setvariable{var=caster.summonstance;value="focus";type=STRING} @self
  - particles{p=dust_color_transition;color1=#ff6d40;color2=#c90000;amount=70;hS=0.35;vS=0.6;size=0.8;y=0.7;speed=0} @self
  - effect:sound{s=block.trial_spawner.spawn_item;volume=0.7;pitch=1} @self

  - signal{signal=FOCUS} @Children

  - auraremove{aura=<caster.name>TARGET} @EIR{r=100}
Summoners_Command_CAST_FREE:
  Skills:
  - auraremove{aura=Summoners_Command_STACK} @self
  - setvariable{var=caster.summonstance;value="free";type=STRING} @self
  - particles{p=dust_color_transition;color1=#e3ff96;color2=#aeff2b;amount=70;hS=0.35;vS=0.6;size=0.8;y=0.7;speed=0} @self
  - effect:sound{s=block.trial_spawner.spawn_item;volume=0.7;pitch=1.25} @self

  - signal{signal=FREE} @Children
  
  - auraremove{aura=<caster.name>FOCUSTARGET} @EIR{r=100}
Summoners_Command_CAST_IDLE:
  Skills:
  - auraremove{aura=Summoners_Command_STACK} @self
  - setvariable{var=caster.summonstance;value="idle";type=STRING} @self
  - particles{p=dust_color_transition;color1=#ffffff;color2=#a8ffff;amount=70;hS=0.35;vS=0.6;size=0.8;y=0.7;speed=0} @self
  - effect:sound{s=block.trial_spawner.spawn_item;volume=0.7;pitch=1.5} @self

  - signal{signal=IDLE} @Children

  - auraremove{aura=<caster.name>FOCUSTARGET} @EIR{r=100}



Minion_FOCUS:
  Cooldown: 0
  Skills:
  - setstance{stance=FOCUS} @self
  - clearThreat{repeat=2;repeati=1} @self
  - settarget{repeat=2;repeati=1} @self
  
  - delay 3
  
  - runaigoalselector{goal=clear} @self
  - runaigoalselector{goal=meleeattack;delay=1} @self ?varEquals{var=caster.Type;value='Melee'}
  - runaigoalselector{goal=MoveWithinDistanceOfTarget{s=1.3;minr=10;maxrange=50};delay=1} @self ?varEquals{var=caster.Type;value='Ranged'}
  - runaigoalselector{goal=MoveWithinDistanceOfTarget{s=1.1;minr=10;maxrange=50};delay=1} @self ?varEquals{var=caster.Type;value='RangedSlow'}
  
  - runaitargetselector{target=clear} @self
  #- runaitargetselector{target=ownertarget;delay=1} @self
Minion_FREE:
  Cooldown: 0
  Skills:
  - setstance{stance=FREE} @self
  - clearThreat{repeat=2;repeati=1} @self
  - settarget{repeat=2;repeati=1} @self
  
  - delay 3
  
  - runaigoalselector{goal=clear} @self
  - runaigoalselector{goal=meleeattack;delay=1} @self ?varEquals{var=caster.Type;value='Melee'}
  - runaigoalselector{goal=MoveWithinDistanceOfTarget{s=1.3;minr=10;maxrange=50};delay=1} @self ?varEquals{var=caster.Type;value='Ranged'}
  - runaigoalselector{goal=MoveWithinDistanceOfTarget{s=1.1;minr=10;maxrange=50};delay=1} @self ?varEquals{var=caster.Type;value='RangedSlow'}

  - runaitargetselector{target=clear} @self
  - setTarget @EIR{r=70;conditions=[- hasaura{aura=<caster.name>TARGET}];sort=RANDOM;limit=1}
  #- message{message=<caster.name>TARGET to owner} @PIR{r=50}
  #- runaitargetselector{target=nearestConditionalTarget{conditions=[- hasaura{aura=<caster.name>TARGET}]};delay=1} @self
Minion_IDLE:
  Cooldown: 0
  Skills:
  - setstance{stance=IDLE} @self
  - clearThreat{repeat=2;repeati=1} @self
  - settarget{repeat=2;repeati=1} @self
  
  - delay 3

  - runaigoalselector{goal=clear} @self
  - runaigoalselector{goal=gotoowner;delay=1} @self
  
  - runaitargetselector{target=clear} @self

Minion_TOOFAR:
  Cooldown: 0
  TargetConditions:
  - distance{d=>40}
  Skills:
  - remove @self
Minion_OWNEROFFLINE:
  Cooldown: 0
  Conditions:
  - ownerIsOnline false
  Skills:
  - remove @self

# Spirit_Wolf #

Spirit_Wolf:
  Cooldown: 0
  Skills:
  - skill{s=Spirit_Wolf_SKILL;damage=<modifier.damage>}

  - skill{s=SETTARGETS_FREE} @EIR{r=30} ?variableeq{var=caster.summonstance;value="free"}

Spirit_Wolf_SKILL:
  Skills:
  - aura{auraName=ISHOLDINGTOME;duration=15} @self
  - skill{s=MINION_SPIRIT_WOLF-SUMMON} ?!hasaura{n=MINION_SPIRIT_WOLF-OWNERAURA}
  - skill{s=MINION_SPIRIT_BLADES-SUMMON} ?!hasaura{n=MINION_SPIRIT_BLADES-OWNERAURA}

  #ATTACKS
  #- skill{s=MINION_SPIRIT_WOLF-ATTACK;repeat=2;repeati=2} ?hasaura{n=MINION_SPIRIT_WOLF-ATTACKAURA}
  - skill{s=MINION_SPIRIT_WOLF-DD} @EIR{r=100;conditions=[ - isLiving true - faction{faction=SUMMON} false - hasaura{aura=WOLFDAMAGE<caster.name>} true ]}
  
SETTARGETS_FREE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  #- message{message=<caster.name>TARGET to self} @self
  - aura{auraName=<caster.name>TARGET;duration=15}


MINION_SPIRIT_BLADES-SUMMON:
  Conditions:
  - hasaura{n=SOULBLADE_CD} false
  Skills:
  - auraremove{aura=VFX_Soul_Blades} @self
  - remove @Children{conditions=[ - mythicmobtype{t=VFX_Soul_Blades} ]}
  - delay 1
  - orbital{auraName=VFX_Soul_Blades;bulletType=MOB;mob=VFX_Soul_Blades;hr=1;vr=1;hp=false;hnp=false;r=0;points=1;i=1;duration=99999;oy=1.9;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.summon;volume=0.7;pitch=<random.float.0.9to1.1>} @self

MINION_SPIRIT_WOLF-ATTACK:
  Cooldown: 0.5
  Skills:
  - totem{drawhitbox=false;md=1;oT=MINION_SPIRIT_WOLF-DAMAGE_D;hnp=true;hp=true;hR=2;vR=1;i=1} @Children{conditions=[ - mythicmobtype{t=MINION_SPIRIT_WOLF} ]}
  
MINION_SPIRIT_WOLF-SUMMON:
  Skills:
  - remove @Children{conditions=[ - mythicmobtype{t=MINION_SPIRIT_WOLF} ]}
  - delay 1
  - summon{type=MINION_SPIRIT_WOLF;amount=1;radius=0;yRadius=0;onSurface=true;onsummon=MINION_SPIRIT_WOLF-SUMMONSKILL} @Forward{f=2;y=0;lockpitch=true;sideOffset=2}
MINION_SPIRIT_WOLF-SUMMONSKILL:
  Skills:
  - particles{p=dust_color_transition;color1=#ffc457;color2=#440c87;amount=150;hS=0.8;vS=0.9;y=0;size=0.7;speed=0} @TargetedTarget
  - signal{s=FOCUS} @TargetedTarget ?variableeq{var=caster.summonstance;value="focus"}
  - signal{s=FREE} @TargetedTarget ?variableeq{var=caster.summonstance;value="free"}
  - signal{s=IDLE} @TargetedTarget ?variableeq{var=caster.summonstance;value="idle"}
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.summon;volume=1;pitch=<random.float.0.9to1.1>} @origin

MINION_SPIRIT_WOLF-SCRATCH_LEFT:
  Cooldown: 2
  Conditions:
  - offgcd
  - targetwithin{d=3} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2

  - gcd{ticks=13}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=13} @self
  - state{s=scratch_left;speed=1} @self
  - delay 5
  - skill{s=MINION_SPIRIT_WOLF-DAMAGE_AURA} @target
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.wolf_claw;volume=0.7;pitch=<random.float.0.9to1.1>} @self
MINION_SPIRIT_WOLF-SCRATCH_RIGHT:
  Cooldown: 2
  Conditions:
  - offgcd
  - targetwithin{d=3} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2

  - gcd{ticks=13}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=13} @self
  - state{s=scratch_right;speed=1} @self
  - delay 5
  - skill{s=MINION_SPIRIT_WOLF-DAMAGE_AURA} @target
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.wolf_claw;volume=0.7;pitch=<random.float.0.9to1.1>} @self
MINION_SPIRIT_WOLF-BITE:
  Cooldown: 2
  Conditions:
  - offgcd
  - targetwithin{d=3} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2
  
  - gcd{ticks=25}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=25} @self
  - state{s=bite;speed=1} @self
  - delay 9
  - skill{s=MINION_SPIRIT_WOLF-DAMAGE_AURA} @target
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.wolf_chomp;volume=0.7;pitch=<random.float.0.9to1.1>} @self
MINION_SPIRIT_WOLF-LEAPBITE:
  Cooldown: 2
  Conditions:
  - offgcd
  - targetwithin{d=3} false
  - targetwithin{d=5} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2
  
  - gcd{ticks=30}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=3} @self
  - lunge{velocity=1.1;velocityY=0.1;delay=4} @target
  - lockmodel{delay=3} @self
  - lockmodel{l=false;delay=14} @self
  - setAI{ai=false;delay=14} @self
  - setAI{ai=true;delay=30} @self
  - state{s=leap_bite;speed=1} @self
  - delay 14
  - skill{s=MINION_SPIRIT_WOLF-DAMAGE_AURA} @target
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.wolf_chomp;volume=0.7;pitch=<random.float.0.9to1.1>} @self


MINION_SPIRIT_WOLF-DAMAGE_AURA:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=WOLFDAMAGE<caster.name>;duration=5}


MINION_SPIRIT_WOLF-DD:
  Skills:
  - skill{s=MINION_SPIRIT_WOLF-DAMAGE} @TargetedTarget{conditions=[ - isLiving true - faction{faction=SUMMON} false ]}
MINION_SPIRIT_WOLF-DAMAGE:
  Cooldown: 0.15
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self


MINION_SPIRIT_WOLF-REMOVE:
  TargetConditions:
  - hasaura{n=ISHOLDINGTOME} false
  Skills:
  - remove @self
MINION_SPIRIT_BLADES-REMOVE:
  TargetConditions:
  - hasaura{n=SOULBLADE_CD} true
  Skills:
  - remove @self

# Soul_Combo #

Soul_Combo:
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  - hasAura{aura=SOULBLADE_CD} false
  Skills:
  - skill{s=Soul_Combo_ST_CAST}
Soul_Combo_ST_CAST:
  Skills:
  - skill{s=Soul_Combo_ST_1;damage=<modifier.damage>}
  - skill{s=Soul_Combo_ST_2;damage=<modifier.damage>}
  - skill{s=Soul_Combo_ST_3;damage=<modifier.damage>}
  - skill{s=Soul_Combo_ST_4;damage=<modifier.damage>}


Soul_Combo_ST_CYCLE1:
  Skills:
  - aura{delay=1;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration;val="<caster.var.iteration>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration>;p=bone;np=bone}
    ]} @self
Soul_Combo_ST_CYCLE2:
  Skills:
  - aura{delay=1;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration;val="<caster.var.iteration>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration>;p=bone;np=bone}
    ]} @self
  - aura{delay=5;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration2;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration2;val="<caster.var.iteration2>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration2>;p=bone2;np=bone2}
    ]} @self
Soul_Combo_ST_CYCLE3:
  Skills:
  - aura{delay=1;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration;val="<caster.var.iteration>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration>;p=bone2;np=bone2}
    ]} @self
  - aura{delay=4;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration2;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration2;val="<caster.var.iteration2>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration2>;p=bone;np=bone}
    ]} @self
  - aura{delay=9;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration3;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration3;val="<caster.var.iteration3>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration3>;p=bone2;np=bone2}
    ]} @self
Soul_Combo_ST_CYCLE4:
  Skills:
  - aura{delay=1;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration;val="<caster.var.iteration>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration>;p=bone;np=bone}
    ]} @self
  - aura{delay=1;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration;val="<caster.var.iteration>+1"}
    - changepart{m=soul_blades_1;nm=soul_blades_<caster.var.iteration>;p=bone2;np=bone2}
    ]} @self


Soul_Combo_ST_1:
  Conditions:
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=1} false
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=2} false
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=3} false
  Skills:
  #slash
  - Aura{auraName=Soul_Combo_Stack;duration=300;maxStacks=3;delay=1} @self

  #slash
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=1} @forward{f=5;y=0;lockpitch=true}
  #slash VFX
  - signal{s=STRIKE1} @Children{conditions=[ - mythicmobtype{t=VFX_Soul_Blades} ]}
  #slash SFX
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>} @self

Soul_Combo_DAMAGE_D:
  Cooldown: 0.001
  Skills:
  - skill{s=Soul_Combo_DAMAGE_DD} @EntitiesNearOrigin{r=3;limit=5;sort=NEAREST}
  - skill{s=Soul_Combo_DAMAGE_DD2} @EntitiesNearOrigin{r=3;limit=1;sort=NEAREST}
Soul_Combo_DAMAGE_DD:
  Skills:
  - skill{s=Soul_Combo_DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false ]}
Soul_Combo_DAMAGE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=2}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self
Soul_Combo_DAMAGE_DD2:
  Skills:
  - auraremove{aura=<caster.name>FOCUSTARGET} @EntitiesInWorld
  - delay 2
  - skill{s=Soul_Combo_DAMAGE2} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false ]}
Soul_Combo_DAMAGE2:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=<caster.name>FOCUSTARGET;duration=99999} ?variableeq{var=caster.summonstance;value="focus"}



Soul_Combo_ST_2:
  Conditions:
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=1} true
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=2} false
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=3} false
  Skills:
  #slash
  - Aura{auraName=Soul_Combo_Stack;duration=300;maxStacks=3;delay=1} @self

  #slash
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=1} @forward{f=5;y=0;lockpitch=true}
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=5} @forward{f=5;y=0;lockpitch=true}
  #slash VFX
  - signal{s=STRIKE2} @Children{conditions=[ - mythicmobtype{t=VFX_Soul_Blades} ]}
  #slash SFX
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>;delay=5} @self



Soul_Combo_ST_3:
  Conditions:
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=1} false
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=2} true
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=3} false
  Skills:
  #slash
  - Aura{auraName=Soul_Combo_Stack;duration=300;maxStacks=3;delay=1} @self

  #slash
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=1} @forward{f=5;y=0;lockpitch=true}
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=4} @forward{f=5;y=0;lockpitch=true}
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=9} @forward{f=5;y=0;lockpitch=true}
  #slash VFX
  - signal{s=STRIKE3} @Children{conditions=[ - mythicmobtype{t=VFX_Soul_Blades} ]}
  #slash SFX
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>;delay=4} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>;delay=9} @self



Soul_Combo_ST_4:
  Conditions:
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=1} false
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=2} false
  - hasaurastacks{auraName=Soul_Combo_Stack;stacks=3} true
  Skills:
  #slash
  - auraremove{aura=Soul_Combo_Stack;delay=1} @self

  #slash
  - projectile{onHit=Soul_Combo_DAMAGE_D;i=1;v=30;hR=2;vR=2;mr=1.5;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true];byo=0;drawhitbox=false;ham=true;delay=1} @forward{f=5;y=0;lockpitch=true}
  #slash VFX
  - signal{s=STRIKE4} @Children{conditions=[ - mythicmobtype{t=VFX_Soul_Blades} ]}
  #slash SFX
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.slash;volume=0.7;pitch=<random.float.0.8to1.2>;delay=2} @self



# Blade_Wheel #

Blade_Wheel:
  Skills:
  - skill{s=Blade_Wheel_CAST;damage=<modifier.damage>}

Blade_Wheel_CAST:
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  - aura{auraName=CASTING;duration=5} @self
  - aura{auraName=SOULBLADE_CD;duration=40} @self
  
  - skill{s=Blade_Wheel_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.65}} @forward{f=12;uel=true;lockpitch=false}
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.sword_spin_launch;volume=0.7;pitch=<random.float.0.9to1.1>} @self
  
Blade_Wheel_PRO:
  Skills:
  - projectile{oT=Blade_Wheel_TICK;bulletyoffset=1;bmd=true;bulletType=MOB;mob=VFX_Blade_Wheel;md=40;v=18;i=1;hR=1.5;vR=1;mr=17;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true];drawhitbox=false;ham=true}
Blade_Wheel_TICK:
  Skills:
  - modifyProjectile{trait=VELOCITY;action=MULTIPLY;value=0.88}
  - skill{s=Blade_Wheel_DAMAGE_D}

Blade_Wheel_DAMAGE_D:
  Cooldown: 0.25
  Skills:
  - skill{s=Blade_Wheel_DAMAGE_DD} @EntitiesNearOrigin{r=3;limit=5;sort=NEAREST}
  - skill{s=Soul_Combo_DAMAGE_DD2} @EntitiesNearOrigin{r=3;limit=1;sort=NEAREST}
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.sword_spin;volume=1;pitch=<random.float.0.9to1.1>} @origin
Blade_Wheel_DAMAGE_DD:
  Skills:
  - skill{s=Blade_Wheel_DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false ]}
Blade_Wheel_DAMAGE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self


# Summon_Minion #

Summon_Minion:
  Skills:
  - skill{s=Summon_Minion_CAST;axedamage=<modifier.axedamage>;spindamage=<modifier.spindamage>;crossbowdamage=<modifier.crossbowdamage>}
Summon_Minion_CAST:
  Cooldown: "<modifier.skillcooldown>"
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  - aura{auraName=CASTING;duration=10} @self
  
  - skill{s=Summon_Minion_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
Summon_Minion_PRO:
  Cooldown: 0.6
  Skills:
  - setvariable{var=caster.miniontype;value="axe";type=STRING} @self ?!variableIsSet{name=caster.miniontype}
  - skill{s=Summon_Minion_PRO_A}
  - delay 1
  - projectile{bmd=true;ohb=Summon_Minion_PRO_OHB_AXE;v=30;i=1;hR=1;vR=1;mr=25;hnp=false;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving false ];byo=0;drawhitbox=false;ham=true} ?variableeq{var=caster.miniontype;value="axe"} ?!hasAura{aura=AXEMINION1}
  - projectile{bmd=true;ohb=Summon_Minion_PRO_OHB_CROSSBOW;v=30;i=1;hR=1;vR=1;mr=25;hnp=false;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving false ];byo=0;drawhitbox=false;ham=true} ?variableeq{var=caster.miniontype;value="crossbow"} ?!hasAura{aura=CROSSBOWMINION1}
  
  - auraremove{aura=MINION_AXE-ATTACKAURA;delay=39} @self
  - auraremove{aura=MINION_CROSSBOW-ATTACKAURA;delay=39} @self


MINION_AXE-SLASH:
  Cooldown: 1
  Conditions:
  - offgcd
  - targetwithin{d=3} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2

  - gcd{ticks=18}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=18} @self
  - state{s=slash;speed=1} @self
  - skill{s=MINION_AXE-CYCLE}
  - delay 9
  - skill{s=MINION_AXE-DAMAGE_AURA} @target
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.minion_knight_attack;volume=0.7;pitch=<random.float.0.9to1.1>} @self
MINION_AXE-SPINSLASH:
  Cooldown: 5
  Conditions:
  - offgcd
  - targetwithin{d=4} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2

  - gcd{ticks=25}
  - state{s=spin_slash;speed=1} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.minion_knight_spin;volume=0.7;pitch=<random.float.0.9to1.1>;repeat=4;repeati=3} @self
  - skill{s=MINION_AXE-DAMAGE_AURA2;repeat=4;repeati=3} @EIR{r=2.5;conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}

  - delay 17

  - state{s=spin_slash;speed=1;remove=true} @self

MINION_AXE-CYCLE:
  Skills:
  - aura{delay=8;d=7;i=1;
    os=[
    - setvariable{var=caster.iteration;val=1;type=INTEGER}
    ];
    ot=[
    - setvariable{var=caster.iteration;val="<caster.var.iteration>+1"}
    - changepart{m=axe_minion_1;nm=axe_minion_<caster.var.iteration>;p=bone;np=bone}
    ]} @self



MINION_AXE-DD:
  Skills:
  - skill{s=MINION_AXE-DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}
MINION_AXE-DAMAGE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.axedamage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self

MINION_AXE-DAMAGE_AURA:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=MINIONAXESLASH<caster.name>;duration=4}




MINION_AXE-DD2:
  Skills:
  - skill{s=MINION_AXE-DAMAGE2} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}
MINION_AXE-DAMAGE2:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.spindamage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self

MINION_AXE-DAMAGE_AURA2:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=MINIONAXESPIN<caster.name>;duration=4}




MINION_CROSSBOW-SHOOT:
  Cooldown: 1
  Conditions:
  - offgcd
  - targetwithin{d=37} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=12;repeati=1} @target

  - delay 2

  - gcd{ticks=30}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=30} @self
  - state{s=shoot;speed=1} @self
  - delay 12
  - projectile{bmd=true;bullettype=ME;model=vfx_arrow;state=shoot2;oS=MINION_CROSSBOW_ARROW_SHOOT_FIX;oH=MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_D;v=0.1;i=1;hR=0.9;vR=0.9;mr=40;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0.4;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true ];byo=2;drawhitbox=false;ham=true} @target{conditions=[- isLiving true - faction{faction=SUMMON} false - hasaura{aura=<caster.name>FOCUSTARGET} true ]} ?variableeq{var=caster.summonstance;value="focus"}
  - projectile{bmd=true;bullettype=ME;model=vfx_arrow;state=shoot2;oS=MINION_CROSSBOW_ARROW_SHOOT_FIX;oH=MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_D;v=0.1;i=1;hR=0.9;vR=0.9;mr=40;hnp=true;hO=0;sE=true;sB=true;hs=false;hfs=0;sfo=0;syo=0.4;tyo=0;sso=0;fo=false;hitConditions=[- isLiving true ];byo=2;drawhitbox=false;ham=true} @target{conditions=[- isLiving true - faction{faction=SUMMON} false ]} ?!variableeq{var=caster.summonstance;value="focus"}
  - delay 4
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.minion_archer_attack;volume=0.7;pitch=<random.float.0.9to1.1>} @self
MINION_CROSSBOW_ARROW_SHOOTE:
  Skills:
  - skill{s=MINION_CROSSBOW_ARROW_DAMAGEFROMOWNER;sync=true;repeat=133;repeati=3}
MINION_CROSSBOW_ARROW_DAMAGEFROMOWNER:
  Cooldown: 0
  Skills:
  - skill{s=MINION_CROSSBOW_ARROW_DAMAGEFROMOWNER2} @EIR{r=100;conditions=[ - isLiving true - hasaura{aura=CROSSBOWDAMAGE<caster.name>} true ]}
MINION_CROSSBOW_ARROW_DAMAGEFROMOWNER2:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.crossbowdamage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.3;pitch=<random.float.1.1to1.2>} @self

MINION_CROSSBOW_ARROW_SHOOT_FIX:
  Skills:
  - delay 3
  - modifyProjectile{trait=VELOCITY;action=SET;value=32}




MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_D:
  Cooldown: 0.001
  Skills:
  - skill{s=MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_DD} @EntitiesNearOrigin{r=3;limit=1;sort=NEAREST}
MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_DD:
  Skills:
  - skill{s=MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false ]}
MINION_CROSSBOW_ARROW_SHOOT_DAMAGE_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=CROSSBOWDAMAGE<caster.name>;duration=4}




Summon_Minion_PRO_A:
  Conditions:
  - variableeq{var=caster.miniontype;value="axe"} castinstead Summon_Minion_PRO_CB
  Skills:
  - setvariable{var=caster.miniontype;value="axe";type=STRING} @self
Summon_Minion_PRO_CB:
  Skills:
  - setvariable{var=caster.miniontype;value="crossbow";type=STRING} @self
Summon_Minion_PRO_OHB_AXE:
  Skills:
  - summon{type=VFX_Summon_Effect;amount=1;radius=0;yRadius=0;onSurface=true} @origin{y=0.1}
  - summon{type=MINION_AXE_MINION;amount=1;radius=0;yRadius=0;onSurface=true;onsummon=MINION_SPIRIT_WOLF-SUMMONSKILL;delay=37} @origin{y=0.1}
  
  - skill{s=MINION_AXE-DD;repeat=133;repeati=3} @EIR{r=100;conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false - hasaura{aura=MINIONAXESLASH<caster.name>} true ]}
  - skill{s=MINION_AXE-DD2;repeat=133;repeati=3} @EIR{r=100;conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false - hasaura{aura=MINIONAXESPIN<caster.name>} true ]}
Summon_Minion_PRO_OHB_CROSSBOW:
  Skills:
  - summon{type=VFX_Summon_Effect;amount=1;radius=0;yRadius=0;onSurface=true} @origin{y=0.1}
  - summon{type=MINION_CROSSBOW_MINION;amount=1;radius=0;yRadius=0;onSurface=true;onsummon=MINION_SPIRIT_WOLF-SUMMONSKILL;delay=37} @origin{y=0.1}
  
  - skill{s=MINION_CROSSBOW_ARROW_SHOOTE;delay=40}

# Soul_Spear #

Soul_Spear:
  Conditions:
  #no lastdance aura
  - hasAura{aura=CASTING} false
  Skills:
  - skill{s=Soul_Spear_CAST;damage=<modifier.damage>;stunduration=<modifier.stunduration>}
Soul_Spear_CAST:
  Skills:
  - aura{auraName=CASTING;duration=35} @self
  
  - skill{s=Soul_Spear_CAST;damage=20;burndamage=3;burnduration=7}
Soul_Spear_CAST:
  Skills:
  - aura{auraName=CASTING;duration=45} @self
  
  - skill{s=Soul_Spear_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.spear_summon;volume=0.7;pitch=<random.float.0.9to1.1>} @self
Soul_Spear_PRO:
  Skills:
  - projectile{bmd=true;ohb=Soul_Spear_PRO_OHB;v=30;i=1;hR=1;vR=1;mr=35;hnp=false;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving false ];byo=0;drawhitbox=false;ham=true}
Soul_Spear_PRO_OHB:
  Skills:
  - summon{type=VFX_Soul_Spear;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - summon{type=VFX_AwakenedSummoner_Rupture_Small;amount=1;radius=0;yRadius=0;onSurface=true;delay=2} @origin
  - summon{type=VFX_AwakenedSummoner_Rubbles_Small;amount=1;radius=0;yRadius=0;onSurface=true;delay=2} @origin
  - particles{p=Campfire_Cosy_Smoke;amount=7;hS=1;vS=0.1;y=0;size=1;speed=0.07;delay=2} @origin
  - skill{s=Soul_Spear_DAMAGE_DD;delay=2} @EntitiesNearOrigin{r=5;limit=15;sort=NEAREST}
  - skill{s=Soul_Combo_DAMAGE_DD2;delay=2} @EntitiesNearOrigin{r=5;limit=1;sort=NEAREST}

Soul_Spear_DAMAGE_DD:
  Skills:
  - skill{s=Soul_Spear-DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}
Soul_Spear-DAMAGE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self

  #stun
  - stun{d=<skill.stunduration> * 20;f=true;CancelOnTakeDamage=false;CancelOnDeath=true}
  #stun vfx
  - orbital{onTick=Soul_SpearSTUNFX;r=0.5;points=22;i=1;duration=<skill.stunduration> * 20;oy=2.3;rx=0;ry=0;rz=0;avx=0;avy=0;avz=0}
Soul_SpearSTUNFX:
  Skills:
  - particles{p=crit;amount=1;hS=0;vS=0;y=0;size=0.4;speed=0} @origin

# Summon_Dragon #

Summon_Dragon:
  Conditions:
  - hasAura{aura=CASTING} false
  - hasAura{aura=DRAGONMINION1} false
  Skills:
  - skill{s=Summon_Dragon_CAST;damage=<modifier.damage>}
Summon_Dragon_CAST:
  Skills:
  - aura{auraName=CASTING;duration=20} @self
  
  - skill{s=Summon_Dragon_PRO;origin=@SelfEyeLocation{fo=-0.5;yo=-0.2}} @forward{f=12;uel=true}

  - auraremove{aura=MINION_DRAGON-FIREBALLAURA;delay=39} @self
  - auraremove{aura=MINION_DRAGON-FIREBREATHAURA;delay=39} @self
  - auraremove{aura=Summon_Dragon_FIREBREATH-ATTACK_AURA;delay=35} @self
  - aura{auraName=Summon_Dragon_FIREBREATH-ATTACK_AURA;oT=Summon_Dragon_FIREBREATH-ATTACKER;interval=3;duration=500;overwriteall=true;delay=40} @self

  - skill{s=Summon_Dragon_FIREBALL_DAMAGEFROMOWNER;sync=true;repeat=166;repeati=3;delay=40}
Summon_Dragon_FIREBALL_DAMAGEFROMOWNER:
  Cooldown: 0
  Skills:
  - skill{s=Summon_Dragon_FIREBALL_DAMAGEFROMOWNER2} @EIR{r=100;conditions=[ - isLiving true - hasaura{aura=FIREBALLDAMAGE<caster.name>} true ]}
Summon_Dragon_FIREBALL_DAMAGEFROMOWNER2:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.3;pitch=<random.float.1.1to1.2>} @self
  - throw{velocity=2;velocityY=4}
  - throw{velocity=0;velocityY=-4;delay=3}


Summon_Dragon_FIREBALL_SHOOT_DAMAGE_D:
  Cooldown: 0.001
  Skills:
  - summon{type=VFX_SOUL_FIREBALL_EXPLOSION;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - summon{type=VFX_AwakenedSummoner_Rubbles_Small;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - effect:sound{s=universal_sounds:samus.universal.rupture_quick;volume=0.7;pitch=<random.float.0.9to1.1>} @origin
  - skill{s=Summon_Dragon_FIREBALL_SHOOT_DAMAGE_DD} @EntitiesNearOrigin{r=5;limit=8;sort=NEAREST}
Summon_Dragon_FIREBALL_SHOOT_DAMAGE_DD:
  Skills:
  - skill{s=Summon_Dragon_FIREBALL_SHOOT_DAMAGE_DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false ]}
Summon_Dragon_FIREBALL_SHOOT_DAMAGE_DAMAGE:
  TargetConditions:
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=FIREBALLDAMAGE<caster.name>;duration=4}
Summon_Dragon_FIREBALL_SHOOT_T:
  Skills:
  - particles{p=dust_color_transition;color1=#edffff;color2=#95afff;amount=30;hS=0.32;vS=0.32;y=0;size=0.4;speed=0;delay=2} @origin




Summon_Dragon_FIREBREATH_SHOOTE:
  Skills:
  - skill{s=Summon_Dragon_FIREBREATH_SHOOT;targetisorigin=true;repeat=220;repeati=2}
Summon_Dragon_FIREBREATH-ATTACKER:
  Skills:
  - skill{s=Summon_Dragon_FIREBREATH-ATTACK}
Summon_Dragon_FIREBREATH-ATTACK:
  Cooldown: 0.05
  Skills:
  - totem{drawhitbox=false;md=1;oT=Summon_Dragon_FIREBREATH-DAMAGE_D;hnp=true;hp=true;hR=2;vR=1;i=1} @EIR{r=50;conditions=[ - mythicmobtype{t=VFX_SOUL_FIREBREATH_DUMMY} - hasaura{n=<caster.name>DUMMY} ]} ?hasaura{n=Summon_Dragon_FIREBREATH-ATTACKAURA}
Summon_Dragon_FIREBREATH-DAMAGE_D:
  Cooldown: 0.001
  Skills:
  - skill{s=Summon_Dragon_FIREBREATH-DD} @EntitiesNearOrigin{r=4.5;limit=6;sort=NEAREST;conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}
Summon_Dragon_FIREBREATH-DD:
  Skills:
  - skill{s=Summon_Dragon_FIREBREATH-DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}
Summon_Dragon_FIREBREATH-DAMAGE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=3}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.45;pitch=<random.float.1.1to1.2>} @self



Summon_Dragon_FIREBREATH_SHOOT:
  Cooldown: 0.05
  Skills:
  #- sudoskill{s=Summon_Dragon_FIREBREATH_SHOOTLOOK;cat=true} @Children{conditions=[ - mythicmobtype{t=MINION_DRAGON} ]}
  - projectile{oH=Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_D;v=27;i=2;hR=1.6;vR=1;mr=7;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=2.2;tyo=1.2;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=true;ham=true} @EntitiesNearOrigin{r=25;limit=1;sort=NEAREST;conditions=[- isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false - hasaura{aura=<caster.name>FOCUSTARGET} true ]} ?hasaura{n=MINION_DRAGON-FIREBREATHAURA} ?variableeq{var=caster.summonstance;value="focus"}
  - projectile{oH=Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_D;v=27;i=2;hR=1.6;vR=1;mr=7;hnp=true;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=2.2;tyo=1.2;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=true;ham=true} @EntitiesNearOrigin{r=25;limit=1;sort=NEAREST;conditions=[- isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]} ?hasaura{n=MINION_DRAGON-FIREBREATHAURA} ?!variableeq{var=caster.summonstance;value="focus"}
  - effect:sound{s=entity.blaze.shoot;volume=0.45;pitch=<random.float.0.9to1.1>} @self ?hasaura{n=MINION_DRAGON-FIREBREATHAURA}
Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_D:
  Cooldown: 0.001
  Skills:
  - skill{s=Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_DD} @EntitiesNearOrigin{r=4.5;limit=6;sort=NEAREST}
Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_DD:
  Skills:
  - skill{s=Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_DAMAGE} @TargetedTarget{conditions=[ - isLiving true - hasaura{aura=immunedelay} false ]}
Summon_Dragon_FIREBREATH_SHOOT_DAMAGE_DAMAGE:
  TargetConditions:
  - mmoCanTarget{interaction=OFFENSE_ACTION} true
  - entitytype{t=ARMOR_STAND} false
  Skills:
  - aura{auraName=immunedelay;duration=4}
  - damage{a=<skill.damage>;pkb=true;hnp=true;hp=true}
  - projectile{targetisorigin=true;bulletType=MOB;mob=VFX_AwakenedSummoner_Impact;v=0;i=1;hR=0;vR=0;mr=2;hnp=false;hO=0;sE=false;sB=false;hs=false;hfs=0;sfo=0;syo=1.2;tyo=1.2;sso=0;fo=true;byo=0;ham=true}
  - effect:sound{s=universal_sounds:samus.universal.hit_impact_thud;volume=0.3;pitch=<random.float.1.1to1.2>} @self

  
Summon_Dragon_FIREBREATH_SHOOTLOOK:
  Skills:
  - look{headOnly=false;immediately=true;force=true} @EntitiesNearOrigin{r=25;limit=1;sort=NEAREST;conditions=[- isLiving true - hasaura{aura=immunedelay} false - faction{faction=SUMMON} false ]}


MINION_DRAGON-FIREBALL:
  Cooldown: 1
  Conditions:
  - offgcd
  - targetwithin{d=20} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=2;repeati=1} @target

  - delay 2

  - gcd{ticks=18}
  - setAI{ai=false} @self
  - setAI{ai=true;delay=18} @self
  - state{s=shoot_fireball;speed=1} @self
  - delay 12
  - projectile{origin=@modelpart{mid=spirit_dragon;pid=jaw;em=true};bmd=true;bulletType=ME;model=soul_fireball;state=animation;oT=Summon_Dragon_FIREBALL_SHOOT_T;ohb=Summon_Dragon_FIREBALL_SHOOT_DAMAGE_D;v=28;i=1;hR=1;vR=1;mr=25;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true} @target{conditions=[- isLiving true - faction{faction=SUMMON} false - hasaura{aura=<caster.name>FOCUSTARGET} true ]} ?variableeq{var=caster.summonstance;value="focus"}
  - projectile{origin=@modelpart{mid=spirit_dragon;pid=jaw;em=true};bmd=true;bulletType=ME;model=soul_fireball;state=animation;oT=Summon_Dragon_FIREBALL_SHOOT_T;ohb=Summon_Dragon_FIREBALL_SHOOT_DAMAGE_D;v=28;i=1;hR=1;vR=1;mr=25;hnp=true;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving true - hasaura{aura=immunedelay} false ];byo=0;drawhitbox=false;ham=true} @target{conditions=[- isLiving true - faction{faction=SUMMON} false ]} ?!variableeq{var=caster.summonstance;value="focus"}
  
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.dragon_roar;volume=1;pitch=<random.float.0.9to1.1>;cooldown=2} @self 0.4
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.dragon_magic_ball;volume=1;pitch=<random.float.0.9to1.1>} @self
MINION_DRAGON-FIREBREATH:
  Cooldown: 7
  Conditions:
  - offgcd
  - targetwithin{d=11} true
  Skills:
  - look{headOnly=false;immediately=true;force=true;repeat=56;repeati=1} @target

  - delay 2

  - gcd{ticks=56}
  - setspeed{speed=0;type=walking} @self
  - setspeed{speed=1.3;type=WALK;delay=90} @self
  - state{s=fire_breath;speed=1} @self
  - delay 21
  - aura{auraName=MINION_DRAGON-FIREBREATHAURA;duration=20;mergeall=false;mergesamecaster=false;bt=false} @owner
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.dragon_roar;volume=1;pitch=<random.float.0.9to1.1>} @self
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.dragon_breath;volume=1;pitch=<random.float.0.9to1.1>} @self

  - summon{type=VFX_SOUL_FIREBREATH_DUMMY;amount=1;radius=0;yRadius=0;onSurface=false} @modelpart{mid=spirit_dragon;pid=efball6;offset=LOCAL;location=0,0,0;em=true}
  - summon{type=VFX_SOUL_FIREBREATH_DUMMY;amount=1;radius=0;yRadius=0;onSurface=false} @modelpart{mid=spirit_dragon;pid=efball4;offset=LOCAL;location=0,0,0;em=true}
  - aura{auraName=Summon_Dragon_FIREBREATH-ATTACKAURA;duration=20;mergeall=false;mergesamecaster=false;bt=false} @owner
Summon_Dragon_SET:
  Skills:
  - sudoskill{s=Summon_Dragon_SETW;cat=true;target=@owner} @TargetedTarget
Summon_Dragon_SETW:
  Skills:
  - setowner
Summon_Dragon_PRO:
  Skills:
  - projectile{bmd=true;ohb=Summon_Dragon_PRO_OHB;v=30;i=1;hR=1;vR=1;mr=25;hnp=false;hO=0;sE=false;sB=true;hs=false;hfs=0;sfo=0;syo=0;tyo=0;sso=0;fo=true;hitConditions=[- isLiving false ];byo=0;drawhitbox=false;ham=true}
Summon_Dragon_PRO_OHB:
  Skills:
  - summon{type=VFX_Summon_Effect2;amount=1;radius=0;yRadius=0;onSurface=true} @origin
  - summon{type=MINION_DRAGON;amount=1;radius=0;yRadius=0;onSurface=true;onsummon=MINION_SPIRIT_DRAGON-SUMMONSKILL;delay=17} @origin

MINION_SPIRIT_DRAGON-SUMMONSKILL:
  Skills:
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.dragon_circle;volume=1;pitch=<random.float.0.9to1.1>} @origin
  - effect:sound{s=awakened_summoner_sounds:samus.awakened_summoner.dragon_appear;volume=1;pitch=<random.float.0.9to1.1>} @origin
  - particles{p=dust_color_transition;color1=#ffc457;color2=#440c87;amount=200;hS=2.5;vS=1.5;y=0;size=0.7;speed=0;delay=5} @TargetedTarget
  - particles{p=dust_color_transition;color1=#ffc457;color2=#440c87;amount=200;hS=2.5;vS=1.5;y=0;size=0.7;speed=0;delay=10} @TargetedTarget
  - particles{p=dust_color_transition;color1=#ffc457;color2=#440c87;amount=200;hS=2.5;vS=1.5;y=0;size=0.7;speed=0;delay=15} @TargetedTarget
  - signal{s=FOCUS} @TargetedTarget ?variableeq{var=caster.summonstance;value="focus"}
  - signal{s=FREE} @TargetedTarget ?variableeq{var=caster.summonstance;value="free"}
  - signal{s=IDLE} @TargetedTarget ?variableeq{var=caster.summonstance;value="idle"}
#aee9a606e111e02c29d52ab339f31451