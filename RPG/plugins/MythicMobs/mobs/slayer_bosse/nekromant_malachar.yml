# ===================================================
# Nekromant Malachar - Slayer Tier V Boss
# Untoten-Slayer Boss mit 3 Kampfphasen
# ===================================================

NekromantMalachar:
  Type: WITHER_SKELETON
  Display: '&5&lNekromant Malachar'
  Health: 5000
  Damage: 20
  Armor: 12
  Options:
    MovementSpeed: 0.25
    PreventOtherDrops: true
    PreventSunburn: true
    AlwaysShowName: true
    FollowRange: 50
  Equipment:
  # Wir geben ihm ein optisches Item, der echte Drop wird unten geregelt
  - 'NETHERITE_SWORD{Enchantments:[sharpness:5],Unbreakable:true,display:{Lore:["&5Stab der Verdammnis"]}} HAND'
  - WITHER_SKELETON_SKULL HEAD
  - LEATHER_CHESTPLATE{color=0,0,0,Unbreakable:true} CHEST
  - LEATHER_LEGGINGS{color=0,0,0,Unbreakable:true} LEGS
  - LEATHER_BOOTS{color=0,0,0,Unbreakable:true} FEET
  
  # ==========================================\n  # Drops (KORRIGIERT)
  # Wir nutzen mmoitems{...} statt mmi, um Fehler zu vermeiden
  # ==========================================
  Drops:
  # Quest Item
  - mmoitems{type=MATERIAL;id=SEELE_DES_NEKROMANTEN;amount=1} 1.0
  # Gold (Menge muss oft als Range 3000-3000 oder fix angegeben werden)
  - mmoitems{type=MATERIAL;id=GOLD_COIN;amount=3000} 1.0
  # XP
  - exp 5000
  # Legendary Weapon (25% Chance) - Using MythicMobs native item
  - StabDerVerdammnis 1 0.25
  
  # ==========================================
  # Skills
  # ==========================================
  Skills:
  # Spawn
  - skill{s=MalacharStartDialog} @self ~onSpawn
  
  # Phase 1 (100%-70% HP)
  - skill{s=TodesgriffMalachar} @target ~onTimer:400
  - skill{s=BeschwoereDienerP1} @self ~onTimer:600
  
  # Phase 2 (70%-40% HP)
  - skill{s=MalacharPhase2Dialog} @self ~onHealthMod:<0.7 1
  - skill{s=SeelenraubMalachar} @self ~onTimer:500 ~onHealthMod:0.4to0.7
  - skill{s=KnochenkaefigMalachar} @target ~onTimer:600 ~onHealthMod:0.4to0.7
  - skill{s=BeschwoereDienerP2} @self ~onTimer:400 ~onHealthMod:0.4to0.7
  
  # Phase 3 (40%-0% HP)
  - skill{s=MalacharPhase3Dialog} @self ~onHealthMod:<0.4 1
  - skill{s=BeschwoereChampions} @self ~onHealthMod:<0.4 1
  - skill{s=TodesnovaMalachar} @self ~onTimer:800 ~onHealthMod:<0.4
  - skill{s=TodesgriffMalachar} @target ~onTimer:300 ~onHealthMod:<0.4
  
  # Death
  - skill{s=MalacharDeathDialog} @self ~onDeath

