# ===================================================
# Spinnenkönigin Arachnia Skills - Slayer Tier V Boss
# Spinnen-Slayer Boss mit 3 Kampfphasen
# ===================================================

# ==========================================
# Phase 1 Skills (100%-60% HP)
# ==========================================

# Giftspucke - Ranged Gift-AoE
GiftspuckeArachnia:
  Skills:
  - 'message{m="&c&lArachnia: &7Kostet mein Gift!"} @target'
  - effect:sound{s=entity.spider.ambient;v=1.5;p=0.5} @self
  - projectile{onTick=Giftspucke_Tick;onHit=Giftspucke_Hit;v=2;i=1;hR=0.5;vR=0.5} @target

Giftspucke_Tick:
  Skills:
  - effect:particles{p=item_slime;a=5;hS=0.1;vS=0.1} @origin

Giftspucke_Hit:
  Skills:
  - damage{a=8} @target
  - potion{t=POISON;d=200;l=2} @target
  - effect:particles{p=item_slime;a=30;hS=1;vS=1} @target
  - effect:sound{s=entity.slime.squish;v=1;p=1} @target
  - potion{t=POISON;d=100;l=1} @PlayersInRadius{r=3}

# Spinnlinge Beschwörung Phase 1
BeschwoereSpinnlingeP1:
  Skills:
  - 'message{m="&c&lArachnia: &7Meine Kinder... VERSCHLINGT SIE!"} @PlayersInRadius{r=30}'
  - effect:particles{p=WHITE_ASH;a=50;hS=3;vS=2} @self
  - effect:sound{s=entity.spider.hurt;v=1.5;p=0.8} @self
  - delay 20
  - summon{t=Spinnling;a=4;r=5} @self
  - effect:particles{p=LARGE_SMOKE;a=80;hS=4;vS=2} @self

# ==========================================
# Phase 2 Skills (60%-30% HP)
# ==========================================

# Netzfalle - Immobilisiert Spieler
NetzfalleArachnia:
  Skills:
  - 'message{m="&c&lArachnia: &7Du bist gefangen!"} @target'
  - effect:sound{s=block.wool.break;v=1.5;p=0.5} @self
  - effect:particles{p=WHITE_ASH;a=50;hS=2;vS=2} @target
  - setblock{material=COBWEB;duration=100} @target
  - potion{t=SLOW;d=100;l=5} @target
  - delay 100
  - setblock{material=AIR} @target
  - effect:particles{p=WHITE_ASH;a=100;hS=3;vS=3} @target

# Hinterhalt - Teleportiert hinter Spieler
HinterhaltArachnia:
  Skills:
  - 'message{m="&c&lArachnia: &7Hinter dir..."} @target'
  - effect:particles{p=LARGE_SMOKE;a=50;hS=2;vS=2} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self
  # KORRIGIERT: Alte Syntax 'removepotioneffect' entfernt
  - potion{type=INVISIBILITY;duration=60;level=1} @self
  - delay 20
  - teleport{l=true} @targetlocation{yoffset=0;xoffset=0;zoffset=-2}
  - delay 5
  # KORRIGIERT: Unsichtbarkeit entfernen mit neuer Syntax
  - potion{type=INVISIBILITY;action=REMOVE} @self
  - damage{a=25} @target
  - effect:particles{p=LARGE_SMOKE;a=50;hS=2;vS=2} @self
  - effect:sound{s=entity.spider.ambient;v=2;p=0.5} @self

# Giftspinnen Beschwörung Phase 2
BeschwoereGiftspinnen:
  Skills:
  - 'message{m="&c&lArachnia: &7Ihr seid nur Beute... nichts weiter!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=80;hS=4;vS=3} @self
  - effect:sound{s=entity.spider.hurt;v=2;p=0.5} @self
  - delay 20
  - summon{t=Giftspinne;a=2;r=6} @self
  - effect:particles{p=item_slime;a=100;hS=5;vS=3} @self

# Unsichtbarkeits-Angriff
UnsichtbarAngriff:
  Skills:
  - 'message{m="&c&lArachnia: &7Versucht mich doch zu finden!"} @PlayersInRadius{r=30}'
  # KORRIGIERT: Syntax angepasst
  - potion{type=INVISIBILITY;duration=60;level=1} @self
  - effect:particles{p=LARGE_SMOKE;a=100;hS=3;vS=3} @self
  - effect:sound{s=entity.enderman.teleport;v=1.5;p=1} @self
  - delay 60
  # KORRIGIERT: Unsichtbarkeit entfernen
  - potion{type=INVISIBILITY;action=REMOVE} @self
  - damage{a=30} @PlayersInRadius{r=3}
  - effect:particles{p=crit;a=50;hS=2;vS=2} @self

# ==========================================
# Phase 3 Skills (30%-0% HP)
# ==========================================

# Kokon - Wickelt Spieler ein
KokonArachnia:
  Skills:
  - 'message{m="&c&lArachnia: &7IHR WERDET MEINE BRUT NIEMALS ZERSTÖREN!"} @target'
  - effect:particles{p=WHITE_ASH;a=100;hS=2;vS=3} @target
  - effect:sound{s=block.wool.place;v=2;p=0.5} @self
  - potion{t=SLOW;d=100;l=10} @target
  - potion{t=WITHER;d=100;l=2} @target
  - potion{t=WEAKNESS;d=100;l=3} @target
  - 'message{m="&e<target.name> ist im Kokon gefangen! Befreit ihn!"} @PlayersInRadius{r=30}'

# Schwarm - Alle Spinnen greifen gleichzeitig an
SchwarmArachnia:
  Skills:
  - 'message{m="&c&l>>> Arachnia ruft den SCHWARM! <<<"} @PlayersInRadius{r=30}'
  - effect:particles{p=angry_villager;a=100;hS=5;vS=3} @self
  - effect:sound{s=entity.spider.hurt;v=2;p=0.5} @self
  - potion{t=SPEED;d=200;l=3} @MobsInRadius{r=50;t=Spinnling,Giftspinne}
  - potion{t=INCREASE_DAMAGE;d=200;l=2} @MobsInRadius{r=50;t=Spinnling,Giftspinne}
  - 'message{m="&cAlle Spinnen werden rasend!"} @PlayersInRadius{r=30}'

# Spinnlinge Raserei Phase 3
BeschwoereSpinnlingeP3:
  Skills:
  - effect:particles{p=WHITE_ASH;a=30;hS=2;vS=2} @self
  - summon{t=Spinnling;a=6;r=5} @self
  - effect:particles{p=LARGE_SMOKE;a=50;hS=3;vS=2} @self

# Phase 3 Rage Buff
RageBuffArachnia:
  Skills:
  - 'message{m="&c&lArachnia: &7RAAAAARRR!"} @PlayersInRadius{r=30}'
  - potion{t=SPEED;d=999999;l=3} @self
  - potion{t=INCREASE_DAMAGE;d=999999;l=2} @self
  - effect:particles{p=angry_villager;a=50;hS=2;vS=2} @self
  - effect:sound{s=entity.ravager.roar;v=1.5;p=0.5} @self

# ==========================================
# Boss Dialog Skills
# ==========================================

# Start Dialog
ArachniaStartDialog:
  Skills:
  - 'message{m="&c&lArachnia: &7Meine Kinder... VERSCHLINGT SIE!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.spider.ambient;v=2;p=0.5} @self
  - delay 40
  - skill{s=BossSpawnAnnounce} @self

# Phase 2 Dialog
ArachniaPhase2Dialog:
  Skills:
  - 'message{m="&c&lArachnia: &7Ihr seid nur Beute... nichts weiter!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.spider.hurt;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self

# Phase 3 Dialog
ArachniaPhase3Dialog:
  Skills:
  - 'message{m="&c&lArachnia: &7IHR WERDET MEINE BRUT NIEMALS ZERSTÖREN!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.spider.death;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self
  - delay 20
  - skill{s=RageBuffArachnia} @self

# Death Dialog
ArachniaDeathDialog:
  Skills:
  - 'message{m="&c&lArachnia: &7Nein... meine Brut... meine Kinder..."} @PlayersInRadius{r=50}'
  - effect:sound{s=entity.spider.death;v=2;p=0.5} @self
  - delay 20
  - skill{s=BossDeathEffects} @self

