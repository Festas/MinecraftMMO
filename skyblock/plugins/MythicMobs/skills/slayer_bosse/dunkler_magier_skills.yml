# ===================================================
# Dunkler Magier Vexorin Skills - Slayer Tier V Boss
# Dämonen-Slayer Boss mit 4 Kampfphasen
# ===================================================

# ==========================================
# Phase 1 Skills (100%-75% HP)
# ==========================================

# Schattenpfeil - Zielsuchender Projektil
SchattenpfeilVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Die Dunkelheit findet dich!"} @target'
  - effect:sound{s=entity.evoker.cast_spell;v=1.5;p=0.5} @self
  - projectile{onTick=Schattenpfeil_Tick;onHit=Schattenpfeil_Hit;v=3;i=1;ht=true;hR=1;vR=1} @target

Schattenpfeil_Tick:
  Skills:
  - effect:particles{p=LARGE_SMOKE;a=10;hS=0.2;vS=0.2} @origin
  - effect:particles{p=portal;a=3;hS=0.1;vS=0.1} @origin

Schattenpfeil_Hit:
  Skills:
  - damage{a=25;ia=0.5} @target
  - potion{t=BLINDNESS;d=60;l=1} @target
  - effect:particles{p=explosion_large;a=1;hS=0.5;vS=0.5} @target
  - effect:sound{s=entity.generic.explode;v=1;p=1} @target

# Leere-Rune - Explodierende Bodenrunen
LeereRuneVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Die Runen der Leere!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.evoker.prepare_summon;v=1.5;p=0.8} @self
  - effect:particles{p=portal;a=50;hS=3;vS=1;y=0} @target
  - effect:particles{p=enchantment_table;a=30;hS=2;vS=2} @target
  - delay 60
  - damage{a=20} @PlayersInRadius{r=3;targetLocation=@target}
  - effect:particles{p=explosion_huge;a=1} @target
  - effect:sound{s=entity.generic.explode;v=1.5;p=0.5} @target

# Teleport
TeleportVexorin:
  Skills:
  - effect:particles{p=reverse_portal;a=100;hS=2;vS=3} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self
  - teleport{l=true;r=10;maxy=5} @self
  - delay 10
  - effect:particles{p=reverse_portal;a=100;hS=2;vS=3} @self
  - effect:sound{s=entity.enderman.teleport;v=1;p=0.8} @self

# ==========================================
# Phase 2 Skills (75%-50% HP)
# ==========================================

# Leere-Explosion - Großer AoE
LeereExplosionVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7VERSCHWINDET!"} @PlayersInRadius{r=20}'
  - effect:particles{p=explosion_huge;a=5;hS=3;vS=2} @self
  - effect:particles{p=portal;a=500;hS=8;vS=2} @self
  - effect:sound{s=entity.generic.explode;v=2;p=0.5} @self
  - delay 20
  - damage{a=30} @PlayersInRadius{r=10}
  - throw{v=3;y=1} @PlayersInRadius{r=10}

# Dunkle Ketten - Verbindet 2 Spieler
DunkleKettenVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Ihr seid aneinander gefesselt!"} @target'
  - effect:particles{p=portal;a=50;hS=1;vS=1} @target
  - effect:sound{s=block.chain.place;v=2;p=0.5} @self
  - potion{t=SLOW;d=200;l=1} @target
  - 'message{m="&c<target.name> ist mit dunklen Ketten verbunden! Bleibt nah beieinander!"} @PlayersInRadius{r=30}'

# Leere-Splitter Beschwörung
BeschwoereLeereSplitter:
  Skills:
  - 'message{m="&0&lVexorin: &7Die Leere heilt mich!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=100;hS=5;vS=3} @self
  - effect:sound{s=entity.vex.ambient;v=1.5;p=0.5} @self
  - delay 20
  - summon{t=Leere_Splitter;a=3;r=6} @self
  - effect:particles{p=reverse_portal;a=150;hS=6;vS=3} @self

# Alias for consistency - BeschwoereSplitter
BeschwoereSplitter:
  Skills:
  - skill{s=BeschwoereLeereSplitter} @self

# Schaden-Reflektion Aktivierung
ReflektionBuffVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Eure Angriffe werden euch vernichten!"} @PlayersInRadius{r=30}'
  - potion{t=ABSORPTION;d=999999;l=2} @self
  - effect:particles{p=damage_indicator;a=100;hS=3;vS=3} @self
  - effect:sound{s=block.beacon.power_select;v=1.5;p=0.5} @self

# ==========================================
# Phase 3 Skills (50%-25% HP)
# ==========================================

# Leere-Sturm - Zieht alle Spieler zur Mitte
LeereSturmVexorin:
  Skills:
  - 'message{m="&0&l>>> Vexorin wirkt LEERE-STURM! <<<"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=300;hS=10;vS=5} @self
  - effect:sound{s=entity.wither.spawn;v=1.5;p=0.5} @self
  - delay 40
  - pull{v=3;y=0.2} @PlayersInRadius{r=15}
  - delay 20
  - damage{a=35} @PlayersInRadius{r=8}
  - effect:particles{p=explosion_huge;a=10;hS=5;vS=3} @self

# Gedankenkontrolle - Übernimmt Spieler
GedankenkontrolleVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Dein Wille gehört MIR!"} @target'
  - 'message{m="&4&l>>> <target.name> wird kontrolliert! <<<"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=100;hS=2;vS=3} @target
  - effect:sound{s=entity.evoker.prepare_attack;v=1.5;p=0.5} @self
  - potion{t=CONFUSION;d=100;l=5} @target
  - potion{t=SLOW;d=100;l=3} @target
  - potion{t=WEAKNESS;d=100;l=2} @target

# Schattenwächter Beschwörung
BeschwoereSchattenwaechter:
  Skills:
  - 'message{m="&0&lVexorin: &7Die Leere VERSCHLINGT alles! Auch EUCH!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=200;hS=6;vS=4} @self
  - effect:sound{s=entity.wither.spawn;v=2;p=0.5} @self
  - delay 30
  - summon{t=Schattenwaechter;a=2;r=7} @self
  - effect:particles{p=explosion_huge;a=10;hS=5;vS=3} @self
  - effect:sound{s=entity.lightning_bolt.thunder;v=1.5;p=0.5} @self

# Alias for consistency - BeschwoereWaechter
BeschwoereWaechter:
  Skills:
  - skill{s=BeschwoereSchattenwaechter} @self

# Leere-Zonen Aktivierung (Kontinuierlicher Schaden auf dem Boden)
LeereZonenVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Der Boden wird zu LEERE!"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=500;hS=15;vS=1;y=0} @self
  - effect:sound{s=block.portal.trigger;v=2;p=0.5} @self
  - potion{t=WITHER;d=100;l=1} @PlayersInRadius{r=15}

# Schwarzes Loch - Pulls all players and damages
SchwarzesLochVexorin:
  Skills:
  - 'message{m="&0&l>>> SCHWARZES LOCH! <<<"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=500;hS=10;vS=10} @self
  - effect:particles{p=reverse_portal;a=500;hS=10;vS=10} @self
  - effect:sound{s=entity.wither.spawn;v=2;p=0.5} @self
  - delay 30
  - pull{v=4;y=0.3} @PlayersInRadius{r=20}
  - delay 20
  - damage{a=30} @PlayersInRadius{r=10}
  - potion{t=SLOW;d=100;l=3} @PlayersInRadius{r=10}
  - effect:particles{p=explosion_huge;a=5;hS=8;vS=5} @self

# Leere-Gefängnis - Traps player in void prison
LeereGefaengnisVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7Du bist in der Leere gefangen!"} @target'
  - effect:particles{p=portal;a=100;hS=3;vS=3} @target
  - effect:sound{s=block.portal.trigger;v=2;p=0.5} @target
  - potion{t=SLOW;d=120;l=10} @target
  - potion{t=BLINDNESS;d=120;l=1} @target
  - potion{t=WEAKNESS;d=120;l=3} @target
  - potion{t=WITHER;d=120;l=1} @target
  - delay 20
  - effect:particles{p=reverse_portal;a=200;hS=2;vS=4} @target
  - 'message{m="&c<target.name> ist im Leere-Gefängnis gefangen!"} @PlayersInRadius{r=30}'

# ==========================================
# Phase 4 Skills (25%-0% HP)
# ==========================================

# Dimensionsriss - Dodgeable One-Shot
DimensionsrissVexorin:
  Skills:
  - 'message{m="&4&l>>> DIMENSIONSRISS! WEICHT AUS! <<<"} @PlayersInRadius{r=30}'
  - effect:particles{p=portal;a=200;hS=5;vS=5} @target
  - effect:particles{p=reverse_portal;a=200;hS=5;vS=5} @target
  - effect:sound{s=entity.wither.spawn;v=2;p=0.5} @self
  - delay 60
  - damage{a=100} @PlayersInRadius{r=5;targetLocation=@target}
  - effect:particles{p=explosion_huge;a=3;hS=3;vS=3} @target
  - effect:sound{s=entity.lightning_bolt.thunder;v=2;p=0.5} @target

# Leere-Apokalypse - Ultimate Channeling Skill
LeereApokalypseVexorin:
  Skills:
  - 'message{m="&0&l>>> Vexorin beginnt LEERE-APOKALYPSE zu wirken! <<<"} @PlayersInRadius{r=50}'
  - 'message{m="&c&lIHR HABT 10 SEKUNDEN! UNTERBRECHT IHN!"} @PlayersInRadius{r=50}'
  - effect:particles{p=reverse_portal;a=500;hS=10;vS=10} @self
  - effect:sound{s=entity.wither.spawn;v=2;p=0.5} @self
  - potion{t=SLOW;d=200;l=10} @self
  - delay 200
  - damage{a=100} @PlayersInRadius{r=50}
  - 'message{m="&0&lVexorin: &7Die Leere... hat gesiegt..."} @PlayersInRadius{r=50}'
  - effect:particles{p=explosion_huge;a=20;hS=20;vS=10} @self
  - effect:sound{s=entity.wither.death;v=2;p=0.5} @self

# Enrage Buff Phase 4
EnrageBuffVexorin:
  Skills:
  - 'message{m="&0&lVexorin: &7NEIN! Das kann nicht sein! DIE LEERE WIRD EUCH ALLE VERSCHLINGEN!"} @PlayersInRadius{r=30}'
  - potion{t=SPEED;d=999999;l=2} @self
  - potion{t=INCREASE_DAMAGE;d=999999;l=3} @self
  - effect:particles{p=angry_villager;a=100;hS=3;vS=3} @self
  - effect:particles{p=portal;a=200;hS=5;vS=5} @self
  - effect:sound{s=entity.ender_dragon.growl;v=2;p=0.5} @self

# ==========================================
# Boss Dialog Skills
# ==========================================

# Start Dialog
VexorinStartDialog:
  Skills:
  - 'message{m="&0&lVexorin: &7Die Leere hat mich erwählt... Ihr seid nur Staub im Wind der Ewigkeit!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.evoker.cast_spell;v=2;p=0.5} @self
  - delay 40
  - skill{s=BossSpawnAnnounce} @self

# Phase 2 Dialog
VexorinPhase2Dialog:
  Skills:
  - 'message{m="&0&lVexorin: &7Ihr beeindruckt mich... aber das wird euch nicht retten!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.evoker.prepare_attack;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self
  - delay 20
  - skill{s=ReflektionBuffVexorin} @self

# Phase 3 Dialog
VexorinPhase3Dialog:
  Skills:
  - 'message{m="&0&lVexorin: &7Die Leere VERSCHLINGT alles! Auch EUCH!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.evoker.prepare_summon;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self

# Phase 4 Dialog
VexorinPhase4Dialog:
  Skills:
  - 'message{m="&0&lVexorin: &7NEIN! Das kann nicht sein! DIE LEERE WIRD EUCH ALLE VERSCHLINGEN!"} @PlayersInRadius{r=30}'
  - effect:sound{s=entity.wither.angry;v=2;p=0.5} @self
  - skill{s=PhaseTransition} @self
  - delay 20
  - skill{s=EnrageBuffVexorin} @self

# Death Dialog
VexorinDeathDialog:
  Skills:
  - 'message{m="&0&lVexorin: &7Nein... die Leere... sie ruft mich zurück..."} @PlayersInRadius{r=50}'
  - effect:sound{s=entity.evoker.death;v=2;p=0.5} @self
  - delay 20
  - skill{s=BossDeathEffects} @self
